/*
 * JPAstreamer - Express JPA queries with Java Streams
 * Copyright (c) 2020-2022, Speedment, Inc. All Rights Reserved.
 *
 * License: GNU Lesser General Public License (LGPL), version 2.1 or later.
 *
 * This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * See: https://github.com/speedment/jpa-streamer/blob/master/LICENSE
 */
var lunr = require('../lunr.js'),
    Benchmark = require('benchmark'),
    wordList = require('word-list'),
    fs = require('fs')

var suite = function (name, fn) {
  var s = new Benchmark.Suite(name, {
    onStart: function (e) { console.log(e.currentTarget.name) },
    onCycle: function (e) { console.log("  " + String(e.target)) },
    onError: function (e) { console.error(e.target.error) }
  })

  fn.call(s, s)

  s.run()
}

var words = fs.readFileSync(wordList, 'utf-8')
  .split('\n')
  .slice(0, 1000)
  .sort()

global.lunr = lunr
global.Benchmark = Benchmark
global.suite = suite
global.words = words
